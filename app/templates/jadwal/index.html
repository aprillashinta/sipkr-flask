{% extends "base.html" %}

{% block title %}Jadwal Perkuliahan - SIPKR{% endblock %}
{% block page_title %}Jadwal Perkuliahan{% endblock %}

{% block content %}
<style>
    /* 1. Style Konsisten (Sama dengan Dosen/Kelas/Ruangan) */
    .card { background: #fff; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); padding: 24px; }
    
    .btn-add { 
        background: var(--primary); color: #fff; padding: 10px 20px; 
        border-radius: 8px; text-decoration: none; display: inline-flex; 
        align-items: center; gap: 8px; font-size: 14px; margin-bottom: 20px; 
        transition: .2s; border: none;
    }
    .btn-add:hover { background: var(--primary-dark); transform: translateY(-2px); }

    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th { text-align: left; padding: 12px 16px; border-bottom: 2px solid #F1F5F9; color: var(--muted); font-size: 13px; text-transform: uppercase; }
    td { padding: 16px; border-bottom: 1px solid #F1F5F9; font-size: 14px; vertical-align: middle; }
    
    /* Badge Khusus Jadwal */
    .badge-hari { background: #FFF7ED; color: #C2410C; padding: 4px 10px; border-radius: 6px; font-weight: 700; font-size: 12px; display: inline-block; margin-bottom: 4px; }
    .badge-jam { background: #F1F5F9; color: #475569; padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; border: 1px solid #E2E8F0; }
    .badge-ruang { background: #E0E7FF; color: var(--primary); padding: 4px 8px; border-radius: 6px; font-weight: 600; font-size: 12px; }

    /* Info Tambahan (Kecil di bawah teks utama) */
    .sub-text { display: block; font-size: 12px; color: #94a3b8; margin-top: 2px; }

    /* Tombol Aksi */
    .actions { display: flex; gap: 10px; justify-content: center; }
    .btn-icon { border: none; background: none; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 6px; border-radius: 6px; transition: .2s; }
    .btn-edit { color: #F59E0B; background: #FEF3C7; }
    .btn-delete { color: #EF4444; background: #FEE2E2; }
    .btn-icon:hover { opacity: 0.8; transform: scale(1.1); }
</style>

<a href="{{ url_for('web.jadwal_create') }}" class="btn-add">
    <i class="material-icons">add</i> Buat Jadwal Baru
</a>

<div class="card">
    <table>
        <thead>
            <tr>
                <th width="20%">HARI & JAM</th>
                <th width="30%">MATA KULIAH</th>
                <th width="20%">DOSEN</th>
                <th width="20%">RUANGAN</th>
                <th width="10%" style="text-align: center;">AKSI</th>
            </tr>
        </thead>
        <tbody>
            {% for j in data %}
            <tr>
                <td>
                    <div class="badge-hari">{{ j.hari }}</div><br>
                    <span class="badge-jam">
                        <i class="material-icons" style="font-size:10px; vertical-align:middle;">schedule</i>
                        {{ j.jam_mulai.strftime('%H:%M') }} - {{ j.jam_selesai.strftime('%H:%M') }}
                    </span>
                </td>

                <td>
                    <div style="font-weight: 600; color: #1e293b;">{{ j.kelas.nama_mk }}</div>
                    <span class="sub-text">{{ j.kelas.prodi }} - Sem {{ j.kelas.semester }} ({{ j.kelas.sks }} SKS)</span>
                </td>

                <td>
                    {{ j.dosen.nama }}
                    <span class="sub-text">NIDN: {{ j.dosen.nidn }}</span>
                </td>

                <td>
                    <span class="badge-ruang">{{ j.ruangan.nama_ruang }}</span>
                    <span class="sub-text" style="margin-top: 5px;">{{ j.ruangan.jenis }}</span> 
                </td>

                <td>
                    <div class="actions">
                        <a href="{{ url_for('web.jadwal_edit', id=j.id) }}" class="btn-icon btn-edit" title="Edit Jadwal">
                            <i class="material-icons" style="font-size: 18px;">edit</i>
                        </a>

                        <form action="{{ url_for('web.jadwal_delete', id=j.id) }}" method="POST" onsubmit="return confirm('Hapus jadwal ini?')">
                            <button class="btn-icon btn-delete" title="Hapus">
                                <i class="material-icons" style="font-size: 18px;">delete</i>
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" style="text-align: center; color: var(--muted); padding: 50px;">
                    <img src="https://cdn-icons-png.flaticon.com/512/7486/7486754.png" width="60" style="opacity: 0.3; margin-bottom: 10px;">
                    <p>Belum ada jadwal perkuliahan yang dibuat.</p>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}